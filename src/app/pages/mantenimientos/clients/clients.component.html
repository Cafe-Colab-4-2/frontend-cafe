<div class="row animated fadeIn fast">
    <div class="col-12">
        <div class="card">
            <div class="card-body">

                <input  type="text"
                        class= "form-control"
                        placeholder="Search ..."  
                        (keyup)="buscar(txtInputTermino.value)"
                        #txtInputTermino/>
            </div>
        </div>
    </div>
</div>

<div class="row animated fadeIn fast" *ngIf="cargando">
    <div class="col-12">

        <div class="alert alert-info text-center">
          <h4 class="alert-heading">Chargin</h4>
          <i class="fa fa-spin fa-refresh fa-2x"></i>
          <p class="mb-0">Please, waith!</p>
        </div>
    </div>
</div>


<!-- DESPLIEGUE DE INFORMACIÓN DE USUARIOS -->
<div class="row fadeIn" *ngIf="!cargando"> 
    <div class="col-12">
    <div class="card">
    <div class="card-body">
        <h4 class="card-title">Clients ({{ totalClientes }}) </h4>
        <h6 class="card-subtitle">Registered Clients</h6>

<!-- Button trigger modal -->
<button type="button" class="btn btn-success" data-toggle="modal" data-target="#newUserModal" (click)="editarCliente = false; formulario()">
    <i class="mdi mdi-account-plus"></i>
    New Client
</button>
  <br><br>
  
  <!-- Modal -->
  <div class="modal fade" id="newUserModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-body">
          
            <!-- ============================================================== -->
            <!-- Main wrapper - style you can find in pages.scss -->
            <!-- ============================================================== -->
            <section id="wrapper" 
                    class="login-register login-sidebar fadeIn" 
                    *ngIf="nuevoCliente">
                <div class="login-box card">
                    <div class="card-body">

                        <!-- ============================================================== -->
                        <!-- FORMULARIO PARA REGISTRO DE USUARIOS -->
                        <!-- ============================================================== -->
                        <form 
                                *ngIf="!editarCliente"
                                class="form-horizontal form-material" 
                                id="loginform" 
                                autocomplete="off"
                                [formGroup]="clientRegisterForm"
                                (ngSubmit)="crearCliente()">
                                <a href="javascript:void(0)" class="text-center db"><img src="./assets/images/logo-dark-text.png" alt="Home"  width="20%"/></a>
                                <h2 class="text-center"> <b> New Client </b></h2>
                                <br><br>
                            <div class="form-group m-t-20">
                                <div class="col-xs-12">
                                    <input class="form-control" type="text" required="" placeholder="Client Nit" formControlName="nit">
                                </div>
                            </div>
                            <div class="form-group ">
                                <div class="col-xs-12">
                                    <input class="form-control border-primary" type="text" required="" placeholder="Name" formControlName="nombre">
                                </div>
                            </div>
                            <div class="form-group ">
                                <div class="col-xs-12">
                                    <input class="form-control border-primary" type="text" required="" placeholder="Surname" formControlName="apellido">
                                </div>
                            </div>
                            <div class="form-group ">
                                <div class="col-xs-12">
                                    <input class="form-control border-primary" type="text" required="" placeholder="Email" formControlName="email">
                                </div>
                            </div>
                            <div class="form-group ">
                                <div class="col-xs-12">
                                    <input class="form-control" type="text" required="" placeholder="Teléfono" formControlName="telefono">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-xs-12">
                                    <input class="form-control" type="text" required="" placeholder="Dirección"  formControlName="direccion">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col text-danger">
                                    <p *ngIf="campoNoValido('nit')">* Nit is required </p>
                                    <p *ngIf="campoNoValido('nombre')">* Name is required </p>
                                    <p *ngIf="campoNoValido('apellido')">* Surname is required </p>
                                    <p *ngIf="campoNoValido('email')">* Email is required </p>
                                    <p *ngIf="campoNoValido('telefono')">* Telephone Number is required </p>
                                    <p *ngIf="campoNoValido('direccion')">* Address is required </p>
                                </div>
                            </div>
                            <div class="form-group text-center m-t-20">
                                <div class="col-xs-12">
                                    <button class="btn btn-info btn-lg btn-block text-uppercase waves-effect waves-light cursor" type="submit">
                                        <i class="mdi mdi-account-plus"></i>
                                        Add Client
                                    </button>
                                </div>
                            </div>
                        </form>
                        <!-- ============================================================== -->
                        <!-- FIN DE FORMULARIO PAR REGISTRO -->
                        <!-- ============================================================== -->


                        <!-- ============================================================== -->
                        <!-- FORMULARIO / EDICION DE USUARIO -->
                        <!-- ============================================================== -->
                        <form 
                                *ngIf="editarCliente"
                                class="form-horizontal form-material" 
                                id="loginform" 
                                autocomplete="off"
                                [formGroup]="clientRegisterForm"
                                (ngSubmit)="modificarCliente( )">
                                <a href="javascript:void(0)" class="text-center db"><img src="./assets/images/logo-dark-text.png" alt="Home"  width="20%"/></a>
                                <h2 class="text-center"> <b> Edit Client </b></h2>
                                <br><br>
                                <div class="form-group m-t-20">
                                    <div class="col-xs-12">
                                        <input class="form-control" type="text" required="" placeholder="Client Nit" formControlName="nit">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-xs-12">
                                        <input class="form-control border-primary" type="text" required="" placeholder="Name" formControlName="nombre">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-xs-12">
                                        <input class="form-control border-primary" type="text" required="" placeholder="Surname" formControlName="apellido">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-xs-12">
                                        <input class="form-control border-primary" type="text" required="" placeholder="Email" formControlName="email">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-xs-12">
                                        <input class="form-control" type="text" required="" placeholder="Teléfono" formControlName="telefono">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-xs-12">
                                        <input class="form-control" type="text" required="" placeholder="Dirección"  formControlName="direccion">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col text-danger">
                                        <p *ngIf="campoNoValido('nit')">* Nit is required </p>
                                        <p *ngIf="campoNoValido('nombre')">* Name is required </p>
                                        <p *ngIf="campoNoValido('apellido')">* Surname is required </p>
                                        <p *ngIf="campoNoValido('email')">* Email is required </p>
                                        <p *ngIf="campoNoValido('telefono')">* Telephone Number is required </p>
                                        <p *ngIf="campoNoValido('direccion')">* Address is required </p>
                                    </div>
                                </div>
                            <div class="form-group text-center m-t-20">
                                <div class="col-xs-12">
                                    <button class="btn btn-info btn-lg btn-block text-uppercase waves-effect waves-light cursor" type="submit">
                                        <i class="mdi mdi-account-edit"></i>
                                        Edit Client
                                    </button>
                                </div>
                            </div>
                        </form>
                        <!-- ============================================================== -->
                        <!-- FIN FORMULARIO / EDICION DE CLIENTE -->
                        <!-- ============================================================== -->

                    </div>
                </div>
            </section>
            <!-- ============================================================== -->
            <!-- End Wrapper -->
            <!-- ============================================================== -->

        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">
            <i class="mdi mdi-close"></i>  
            Close
            </button>
        </div>
      </div>
    </div>
  </div>


        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr class="text-center">
                        <th class="w100">Avatar</th>
                        <th class="w100">Nit</th>
                        <th>Name</th>
                        <th>Surname</th>
                        <th class="w100">Email</th>
                        <th class="w100">Telephone</th>
                        <th class="w100">Address</th>
                        <th class="w100">Status</th>
                        <th class="text-nowrap w100">Action</th>
                    </tr>
                </thead>
                <tbody>            
                    <tr  *ngFor="let client of clientes">
                        <td class="text-center"> <img [src]="client.getImage" alt="Avatar de Cliente" class="avatar"> </td>
                        <td> {{ client.nit }} </td>
                        <td> {{ client.nombre }} </td>
                        <td> {{ client.apellido }} </td>
                        <td> {{ client.email }} </td>
                        <td> {{ client.telefono }} </td>
                        <td> {{ client.direccion }} </td>
                        <td>
                            <select 
                            class="form-control w140"
                            [(ngModel)]="client.activo"
                            (change)="modificarCliente( client )"
                            >
                                <option value="true">Active</option>
                                <option value="false">Inactive</option>
                            </select>
                        </td>
                        
                        <td class="text-nowrap text-center">
                            <a data-toggle="modal"  data-original-title="Edit"   (click)="cargarCliente( client )" data-target="#newUserModal"> <i class="fa fa-pencil text-inverse m-r-10"></i> </a>
                            <a data-toggle="tooltip" data-original-title="Close" (click)="eliminarCliente( client )" class="cursor"> <i class="fa fa-close text-danger"></i> </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div *ngIf="txtInputTermino.value.length === 0">
            <button (click)="cambiarPagina(-5)" class="btn btn-secondary">Previous</button>
            &nbsp;
            {{ desde + 1 }} - 

            <label *ngIf="((desde + 5) > totalClientes)">
                {{ totalClientes }}
            </label>
            <label *ngIf="!((desde + 5) > totalClientes)">
                {{ desde + 5 }}
            </label>
            &nbsp;
            <button  (click)="cambiarPagina(5)" class="btn btn-secondary">Next</button>
        </div>
    </div>
</div>
</div>
</div>